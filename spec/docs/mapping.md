# Mapping to RDF with Triples Maps

A <dfn>triples map</dfn> specifies a set of rules for translating
each iteration of a [=logical source=] to zero or more RDF triples.

All RDF triples generated from one [=logical iteration=] in the [=logical source=] share the same subject.

A [=triples map=] is represented by a resource that references the following other resources:

* It MUST have zero or one [=logical source=] (`rml:logicalSource`) property.  The [=logical source=] property MAY only be omitted if all of the [=term maps=] of the [=triples map=] are [=constant-valued term maps=].
* It MUST have exactly one [=subject map=] (`rml:SubjectMap`) that specifies
how to generate a subject for each iteration of the [=Logical Source=].
It may be specified in two ways:
    1. using the subject map `rml:subjectMap` property, 
  whose value MUST be the [=subject map=], or
    2. using the constant shortcut property (``rml:subject``),
  followed by a constant IRI.
* It MUST have zero or more predicate-object maps (`rml:predicateObjectMap`) properties,
whose values MUST be [=predicate-object maps=].
They specify pairs of [=predicate maps=] and [=object maps=] that,
together with the subjects generated by the [=subject map=],
may form one or more [=RDF triples=] for each iteration.

```
<#TM> 
  rml:LogicalSource <#LS> ;
  rml:subjectMap <#SM> ;
  rml:predicateObjectMap <#POM1>, <#POM2>, ..., <#POMn> . 
```

<aside class="note">
The [=logical source=] on a [=triples map=] can be omitted if all its [=term maps=] produce values irrespective of a logical source. This is the case if all its [=term maps=] are [=constant-valued expression maps=], or have `rml:BlankNode` as [=term type=] and no declared [=expression=].
</aside>

# Term Maps

<aside class="issue">
Pano: this seems a bit out of place here. I would expect to then get an overview of all term maps, but that doesnt happen here. It does happen in [[[#termmap]]].
So seems like these sections can be merged.
</aside>

The referenced data of all [=term maps=] of a [=triples map=]
([=subject map=], [=predicate maps=], [=object maps=], [=graph maps=])
MUST be references that exist in the [=term map=]'s logical source.

<aside class="issue">
Pano: what does it mean for a reference (for example an xpath query) to exist in a logical source?
</aside>

# Subject Maps

A <dfn>subject map</dfn> is a [=term map=]. 
It specifies a rule for generating the subjects of the [=RDF triples=]
generated by a [=triples map=].

## Typing Resources (rml:class)

A [=subject map=] MAY have one or more _**class IRIs**_.
They are represented by the `rml:class` property.
The values of the `rml:class` property MUST be [=IRIs=].
For each [=RDF term=] generated by the [=subject map=],
[=RDF triples=] with predicate `rdf:type` and the class IRI as object will be generated.

<aside class="note">
Mappings where the class IRI is not constant,
but needs to be computed based on the contents of the database,
can be achieved by defining a [=predicate-object map=] with predicate `rdf:type`
and a non-constant [=object map=].
</aside>

## Creating Properties and Values with Predicate-Object Maps

A <dfn>predicate-object map</dfn> is a function
that creates one or more predicate-object pairs
for each logical iteration of a logical data source.
It is used in conjunction with a [=subject map=]
to generate [=RDF triples=] in a [=triples map=].

A [=predicate-object map=] is represented by a resource
that references the following other resources:

* One or more [=predicate maps=]. Each of them may be specified in one of two ways:
    1. using the `rml:predicateMap` property, whose value MUST be a [=predicate map=], or
    2. using the constant shortcut property `rml:predicate`.

* One or more [=object maps=] or referencing [=object maps=].
Each of them may be specified in one of two ways:
    1. using the `rml:objectMap` property,
    whose value MUST be either an [=object map=], or a [=referencing object map=].
        using the constant shortcut property `rml:object`.

A <dfn>predicate map</dfn> is a [=term map=].

An <dfn>object map</dfn> is a [=term map=].
